<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>4.4</version>
    <date>2025-06-18T10:30:49Z</date>
    <groups>
        <group>
            <name>Templates/Other Hardware</name>
        </group>
    </groups>
    <templates>
        <template>
            <template>Template SensatronicsEM1</template>
            <name>Template SensatronicsEM1</name>
            <description>https://github.com/AndAndr/Zabbix-templates&#13;
&#13;
Мониторинг по SNMPv1 контроллера температуры/влажности Sensatronics EM1. Автоматическое обнаружение подключенных датчиков температуры и влажности - до четырёх штук. Для успешного автоматического обнаружения датчика, необходимо в настройках контроллера назначить ему имя, отличное от имени по-умолчанию. Точка росы считается по упрощённой формуле с большой нелинейной погрешностью, т.к. Zabbix v4 не поддерживает математические функции.</description>
            <groups>
                <group>
                    <name>Templates/Other Hardware</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>Chassis</name>
                </application>
                <application>
                    <name>General</name>
                </application>
                <application>
                    <name>Sensors</name>
                </application>
                <application>
                    <name>Status</name>
                </application>
            </applications>
            <items>
                <item>
                    <name>Model</name>
                    <type>SNMPV1</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>1.3.6.1.4.1.16174.1.1.3.1.2.0</snmp_oid>
                    <key>1.3.6.1.4.1.16174.1.1.3.1.2.0</key>
                    <delay>4h</delay>
                    <history>30d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <inventory_link>MODEL</inventory_link>
                    <applications>
                        <application>
                            <name>Chassis</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <params>1d</params>
                        </step>
                    </preprocessing>
                </item>
                <item>
                    <name>FW Version</name>
                    <type>SNMPV1</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>1.3.6.1.4.1.16174.1.1.3.1.5.0</snmp_oid>
                    <key>1.3.6.1.4.1.16174.1.1.3.1.5.0</key>
                    <delay>4h</delay>
                    <history>30d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <inventory_link>HARDWARE</inventory_link>
                    <applications>
                        <application>
                            <name>Chassis</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <params>1d</params>
                        </step>
                    </preprocessing>
                </item>
                <item>
                    <name>SN</name>
                    <type>SNMPV1</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>1.3.6.1.4.1.16174.1.1.3.1.7.0</snmp_oid>
                    <key>1.3.6.1.4.1.16174.1.1.3.1.7.0</key>
                    <delay>4h</delay>
                    <history>30d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <inventory_link>SERIALNO_A</inventory_link>
                    <applications>
                        <application>
                            <name>Chassis</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <params>1d</params>
                        </step>
                    </preprocessing>
                </item>
                <item>
                    <name>ICMP ping</name>
                    <type>SIMPLE</type>
                    <key>icmpping</key>
                    <applications>
                        <application>
                            <name>Status</name>
                        </application>
                    </applications>
                    <valuemap>
                        <name>Service state</name>
                    </valuemap>
                    <triggers>
                        <trigger>
                            <expression>{max(#3)}=0</expression>
                            <name>Unavailable by ICMP ping</name>
                            <priority>WARNING</priority>
                            <description>Last three attempts returned timeout.  Please check device connectivity.</description>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>ICMP loss</name>
                    <type>SIMPLE</type>
                    <key>icmppingloss</key>
                    <value_type>FLOAT</value_type>
                    <units>%</units>
                    <applications>
                        <application>
                            <name>Status</name>
                        </application>
                    </applications>
                    <triggers>
                        <trigger>
                            <expression>{min(5m)}&gt;{$ICMP_LOSS_WARN} and {min(5m)}&lt;100</expression>
                            <name>High ICMP ping loss</name>
                            <opdata>Loss: {ITEM.LASTVALUE1}</opdata>
                            <priority>INFO</priority>
                            <dependencies>
                                <dependency>
                                    <name>Unavailable by ICMP ping</name>
                                    <expression>{Template SensatronicsEM1:icmpping.max(#3)}=0</expression>
                                </dependency>
                            </dependencies>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>ICMP response time</name>
                    <type>SIMPLE</type>
                    <key>icmppingsec</key>
                    <value_type>FLOAT</value_type>
                    <units>s</units>
                    <applications>
                        <application>
                            <name>Status</name>
                        </application>
                    </applications>
                    <triggers>
                        <trigger>
                            <expression>{avg(5m)}&gt;{$ICMP_RESPONSE_TIME_WARN}</expression>
                            <name>High ICMP ping response time</name>
                            <opdata>Value: {ITEM.LASTVALUE1}</opdata>
                            <priority>INFO</priority>
                            <dependencies>
                                <dependency>
                                    <name>High ICMP ping loss</name>
                                    <expression>{Template SensatronicsEM1:icmppingloss.min(5m)}&gt;{$ICMP_LOSS_WARN} and {Template SensatronicsEM1:icmppingloss.min(5m)}&lt;100</expression>
                                </dependency>
                                <dependency>
                                    <name>Unavailable by ICMP ping</name>
                                    <expression>{Template SensatronicsEM1:icmpping.max(#3)}=0</expression>
                                </dependency>
                            </dependencies>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>System contact details</name>
                    <type>SNMPV1</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>1.3.6.1.2.1.1.4.0</snmp_oid>
                    <key>system.contact[sysContact.0]</key>
                    <delay>4h</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <description>MIB: SNMPv2-MIB&#13;
The textual identification of the contact person for this managed node, together with information on how to contact this person.  If no contact information is known, the value is the zero-length string.</description>
                    <inventory_link>CONTACT</inventory_link>
                    <applications>
                        <application>
                            <name>General</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <params>1d</params>
                        </step>
                    </preprocessing>
                </item>
                <item>
                    <name>System description</name>
                    <type>SNMPV1</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>1.3.6.1.2.1.1.1.0</snmp_oid>
                    <key>system.descr[sysDescr.0]</key>
                    <delay>4h</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <description>MIB: SNMPv2-MIB&#13;
A textual description of the entity. This value should&#13;
include the full name and version identification of the system's hardware type, software operating-system, and&#13;
networking software.</description>
                    <applications>
                        <application>
                            <name>General</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <params>1d</params>
                        </step>
                    </preprocessing>
                </item>
                <item>
                    <name>System location</name>
                    <type>SNMPV1</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>1.3.6.1.2.1.1.6.0</snmp_oid>
                    <key>system.location[sysLocation.0]</key>
                    <delay>4h</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <description>MIB: SNMPv2-MIB&#13;
The physical location of this node (e.g., `telephone closet, 3rd floor').  If the location is unknown, the value is the zero-length string.</description>
                    <inventory_link>LOCATION</inventory_link>
                    <applications>
                        <application>
                            <name>General</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <params>1h</params>
                        </step>
                    </preprocessing>
                </item>
                <item>
                    <name>System name</name>
                    <type>SNMPV1</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>1.3.6.1.2.1.1.5.0</snmp_oid>
                    <key>system.name</key>
                    <delay>4h</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <description>MIB: SNMPv2-MIB&#13;
An administratively-assigned name for this managed node.By convention, this is the node's fully-qualified domain name.  If the name is unknown, the value is the zero-length string.</description>
                    <inventory_link>NAME</inventory_link>
                    <applications>
                        <application>
                            <name>General</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <params>1h</params>
                        </step>
                    </preprocessing>
                    <triggers>
                        <trigger>
                            <expression>{diff()}=1 and {strlen()}&gt;0</expression>
                            <name>System name has changed (new name: {ITEM.VALUE})</name>
                            <priority>INFO</priority>
                            <description>System name has changed.</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Uptime</name>
                    <type>SNMPV1</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>1.3.6.1.2.1.1.3.0</snmp_oid>
                    <key>system.uptime[sysUpTime.0]</key>
                    <delay>30s</delay>
                    <history>30d</history>
                    <trends>0</trends>
                    <units>uptime</units>
                    <description>MIB: SNMPv2-MIB&#13;
The time (in hundredths of a second) since the network management portion of the system was last re-initialized.</description>
                    <applications>
                        <application>
                            <name>Status</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>MULTIPLIER</type>
                            <params>0.01</params>
                        </step>
                    </preprocessing>
                    <triggers>
                        <trigger>
                            <expression>{last()}&lt;10m</expression>
                            <name>{HOST.NAME} has been restarted (uptime &lt; 10m)</name>
                            <priority>WARNING</priority>
                            <description>Uptime is less than 10 minutes</description>
                            <manual_close>YES</manual_close>
                            <dependencies>
                                <dependency>
                                    <name>No SNMP data collection</name>
                                    <expression>{Template SensatronicsEM1:zabbix[host,snmp,available].max({$SNMP.TIMEOUT})}=0</expression>
                                </dependency>
                            </dependencies>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>SNMP agent availability</name>
                    <type>INTERNAL</type>
                    <key>zabbix[host,snmp,available]</key>
                    <applications>
                        <application>
                            <name>Status</name>
                        </application>
                    </applications>
                    <valuemap>
                        <name>zabbix.host.available</name>
                    </valuemap>
                    <triggers>
                        <trigger>
                            <expression>{max({$SNMP.TIMEOUT})}=0</expression>
                            <name>No SNMP data collection</name>
                            <opdata>Current state: {ITEM.LASTVALUE1}</opdata>
                            <priority>WARNING</priority>
                            <description>SNMP is not available for polling. Please check device connectivity and SNMP settings.</description>
                            <dependencies>
                                <dependency>
                                    <name>Unavailable by ICMP ping</name>
                                    <expression>{Template SensatronicsEM1:icmpping.max(#3)}=0</expression>
                                </dependency>
                            </dependencies>
                        </trigger>
                    </triggers>
                </item>
            </items>
            <discovery_rules>
                <discovery_rule>
                    <name>Sensor 1 discovery</name>
                    <type>SNMPV1</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>discovery[{#SENSORNAME},.1.3.6.1.4.1.16174.1.1.3.3.1.1]</snmp_oid>
                    <key>Sensor1</key>
                    <delay>10m</delay>
                    <filter>
                        <evaltype>AND</evaltype>
                        <conditions>
                            <condition>
                                <macro>{#SENSORNAME}</macro>
                                <value>{$SENSORNAME.NOT_MATCH}</value>
                                <operator>NOT_MATCHES_REGEX</operator>
                                <formulaid>A</formulaid>
                            </condition>
                            <condition>
                                <macro>{#SENSORNAME}</macro>
                                <value>{$SENSORNAME.MATCH}</value>
                                <formulaid>B</formulaid>
                            </condition>
                        </conditions>
                    </filter>
                    <lifetime>1d</lifetime>
                    <description>Автоматическое обнаружение сенсора №1, при условии настроенного имени, отличного от имени по-умолчанию.</description>
                    <item_prototypes>
                        <item_prototype>
                            <name>{#SENSORNAME} DewPoint</name>
                            <type>CALCULATED</type>
                            <key>sensor1.dewpoint[{#SENSORNAME}]</key>
                            <value_type>FLOAT</value_type>
                            <units>`C</units>
                            <params>last(sensor1.temperature[{#SENSORNAME}])-((100-last(sensor1.humidity[{#SENSORNAME}]))/5)</params>
                            <description>Zabbix version 4 does not support mathematical functions, so a simple formula with a high margin of error is used: T_d = T - ((100 - RH) / 5)</description>
                            <applications>
                                <application>
                                    <name>Sensors</name>
                                </application>
                            </applications>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last()}&gt;{$DEWPOINT.MAX}</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{last()}&lt;{$DEWPOINT.MAX}-1</recovery_expression>
                                    <name>Dew point {#SENSORNAME} is gt {$DEWPOINT.MAX} `C</name>
                                    <priority>WARNING</priority>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{last()}&lt;{$DEWPOINT.MIN}</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{last()}&gt;{$DEWPOINT.MIN}+1</recovery_expression>
                                    <name>Dew point {#SENSORNAME} is lt {$DEWPOINT.MIN} `C</name>
                                    <priority>WARNING</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#SENSORNAME} Humidity</name>
                            <type>SNMPV1</type>
                            <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                            <snmp_oid>.1.3.6.1.4.1.16174.1.1.3.3.1.6.0</snmp_oid>
                            <key>sensor1.humidity[{#SENSORNAME}]</key>
                            <units>%</units>
                            <applications>
                                <application>
                                    <name>Sensors</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>IN_RANGE</type>
                                    <params>0
100</params>
                                </step>
                            </preprocessing>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last()}&gt;{$HUMIDITY.MAX}</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{last()}&lt;{$HUMIDITY.MAX}-5</recovery_expression>
                                    <name>Humidity {#SENSORNAME} is gt {$HUMIDITY.MAX} %</name>
                                    <priority>WARNING</priority>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{last()}&lt;{$HUMIDITY.MIN}</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{last()}&gt;{$HUMIDITY.MIN}+5</recovery_expression>
                                    <name>Humidity {#SENSORNAME} is lt {$HUMIDITY.MAX} %</name>
                                    <priority>WARNING</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#SENSORNAME} Temperature</name>
                            <type>SNMPV1</type>
                            <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                            <snmp_oid>.1.3.6.1.4.1.16174.1.1.3.3.1.3.0</snmp_oid>
                            <key>sensor1.temperature[{#SENSORNAME}]</key>
                            <units>`C</units>
                            <applications>
                                <application>
                                    <name>Sensors</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>IN_RANGE</type>
                                    <params>-20
100</params>
                                </step>
                            </preprocessing>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{nodata(5m)}=1</expression>
                                    <name>No data. Check sensor {#SENSORNAME}</name>
                                    <priority>WARNING</priority>
                                    <dependencies>
                                        <dependency>
                                            <name>No SNMP data collection</name>
                                            <expression>{Template SensatronicsEM1:zabbix[host,snmp,available].max({$SNMP.TIMEOUT})}=0</expression>
                                        </dependency>
                                    </dependencies>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{last()}&gt;{$TEMPERATURE.MAX}</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{last()}&lt;{$TEMPERATURE.MAX}-1</recovery_expression>
                                    <name>Temperature {#SENSORNAME} is gt {$TEMPERATURE.MAX} `C</name>
                                    <priority>DISASTER</priority>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{last()}&lt;{$TEMPERATURE.MIN}</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{last()}&gt;{$TEMPERATURE.MIN}+1</recovery_expression>
                                    <name>Temperature {#SENSORNAME} is lt {$TEMPERATURE.MIN} `C</name>
                                    <priority>DISASTER</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                    </item_prototypes>
                    <graph_prototypes>
                        <graph_prototype>
                            <name>Humidity Sensor1 {#SENSORNAME}</name>
                            <ymin_type_1>FIXED</ymin_type_1>
                            <ymax_type_1>FIXED</ymax_type_1>
                            <graph_items>
                                <graph_item>
                                    <color>0080FF</color>
                                    <item>
                                        <host>Template SensatronicsEM1</host>
                                        <key>sensor1.humidity[{#SENSORNAME}]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <name>Temperature Sensor1 {#SENSORNAME}</name>
                            <yaxismax>30.0000</yaxismax>
                            <ymin_type_1>FIXED</ymin_type_1>
                            <ymax_type_1>FIXED</ymax_type_1>
                            <graph_items>
                                <graph_item>
                                    <color>0080FF</color>
                                    <item>
                                        <host>Template SensatronicsEM1</host>
                                        <key>sensor1.temperature[{#SENSORNAME}]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>FILLED_REGION</drawtype>
                                    <color>0080FF</color>
                                    <item>
                                        <host>Template SensatronicsEM1</host>
                                        <key>sensor1.dewpoint[{#SENSORNAME}]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                    </graph_prototypes>
                </discovery_rule>
                <discovery_rule>
                    <name>Sensor 2 discovery</name>
                    <type>SNMPV1</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>discovery[{#SENSORNAME},.1.3.6.1.4.1.16174.1.1.3.3.2.1]</snmp_oid>
                    <key>Sensor2</key>
                    <delay>10m</delay>
                    <filter>
                        <evaltype>AND</evaltype>
                        <conditions>
                            <condition>
                                <macro>{#SENSORNAME}</macro>
                                <value>{$SENSORNAME.NOT_MATCH}</value>
                                <operator>NOT_MATCHES_REGEX</operator>
                                <formulaid>A</formulaid>
                            </condition>
                            <condition>
                                <macro>{#SENSORNAME}</macro>
                                <value>{$SENSORNAME.MATCH}</value>
                                <formulaid>B</formulaid>
                            </condition>
                        </conditions>
                    </filter>
                    <lifetime>1d</lifetime>
                    <description>Автоматическое обнаружение сенсора №2, при условии настроенного имени, отличного от имени по-умолчанию.</description>
                    <item_prototypes>
                        <item_prototype>
                            <name>{#SENSORNAME} DewPoint</name>
                            <type>CALCULATED</type>
                            <key>sensor2.dewpoint[{#SENSORNAME}]</key>
                            <value_type>FLOAT</value_type>
                            <units>`C</units>
                            <params>last(sensor2.temperature[{#SENSORNAME}])-((100-last(sensor2.humidity[{#SENSORNAME}]))/5)</params>
                            <description>Zabbix version 4 does not support mathematical functions, so a simple formula with a high margin of error is used: T_d = T - ((100 - RH) / 5)</description>
                            <applications>
                                <application>
                                    <name>Sensors</name>
                                </application>
                            </applications>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last()}&gt;{$DEWPOINT.MAX}</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{last()}&lt;{$DEWPOINT.MAX}-1</recovery_expression>
                                    <name>Dew point {#SENSORNAME} is gt {$DEWPOINT.MAX} `C</name>
                                    <priority>WARNING</priority>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{last()}&lt;{$DEWPOINT.MIN}</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{last()}&gt;{$DEWPOINT.MIN}+1</recovery_expression>
                                    <name>Dew point {#SENSORNAME} is lt {$DEWPOINT.MIN} `C</name>
                                    <priority>WARNING</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#SENSORNAME} Humidity</name>
                            <type>SNMPV1</type>
                            <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                            <snmp_oid>.1.3.6.1.4.1.16174.1.1.3.3.2.6.0</snmp_oid>
                            <key>sensor2.humidity[{#SENSORNAME}]</key>
                            <value_type>FLOAT</value_type>
                            <units>%</units>
                            <applications>
                                <application>
                                    <name>Sensors</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>IN_RANGE</type>
                                    <params>0
100</params>
                                </step>
                            </preprocessing>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last()}&gt;{$HUMIDITY.MAX}</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{last()}&lt;{$HUMIDITY.MAX}-5</recovery_expression>
                                    <name>Humidity {#SENSORNAME} is gt {$HUMIDITY.MAX} %</name>
                                    <priority>WARNING</priority>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{last()}&lt;{$HUMIDITY.MIN}</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{last()}&gt;{$HUMIDITY.MIN}+5</recovery_expression>
                                    <name>Humidity {#SENSORNAME} is lt {$HUMIDITY.MAX} %</name>
                                    <priority>WARNING</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#SENSORNAME} Temperature</name>
                            <type>SNMPV1</type>
                            <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                            <snmp_oid>.1.3.6.1.4.1.16174.1.1.3.3.2.3.0</snmp_oid>
                            <key>sensor2.temperature[{#SENSORNAME}]</key>
                            <value_type>FLOAT</value_type>
                            <units>`C</units>
                            <applications>
                                <application>
                                    <name>Sensors</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>IN_RANGE</type>
                                    <params>-20
100</params>
                                </step>
                            </preprocessing>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{nodata(5m)}=1</expression>
                                    <name>No data. Check sensor {#SENSORNAME}</name>
                                    <priority>WARNING</priority>
                                    <dependencies>
                                        <dependency>
                                            <name>No SNMP data collection</name>
                                            <expression>{Template SensatronicsEM1:zabbix[host,snmp,available].max({$SNMP.TIMEOUT})}=0</expression>
                                        </dependency>
                                    </dependencies>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{last()}&gt;{$TEMPERATURE.MAX}</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{last()}&lt;{$TEMPERATURE.MAX}-1</recovery_expression>
                                    <name>Temperature {#SENSORNAME} is gt {$TEMPERATURE.MAX} `C</name>
                                    <priority>DISASTER</priority>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{last()}&lt;{$TEMPERATURE.MIN}</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{last()}&gt;{$TEMPERATURE.MIN}+1</recovery_expression>
                                    <name>Temperature {#SENSORNAME} is lt {$TEMPERATURE.MIN} `C</name>
                                    <priority>DISASTER</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                    </item_prototypes>
                    <graph_prototypes>
                        <graph_prototype>
                            <name>Humidity Sensor2 {#SENSORNAME}</name>
                            <ymin_type_1>FIXED</ymin_type_1>
                            <ymax_type_1>FIXED</ymax_type_1>
                            <graph_items>
                                <graph_item>
                                    <color>00FFBF</color>
                                    <item>
                                        <host>Template SensatronicsEM1</host>
                                        <key>sensor2.humidity[{#SENSORNAME}]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <name>Temperature Sensor2 {#SENSORNAME}</name>
                            <yaxismax>30.0000</yaxismax>
                            <ymin_type_1>FIXED</ymin_type_1>
                            <ymax_type_1>FIXED</ymax_type_1>
                            <graph_items>
                                <graph_item>
                                    <color>00FFBF</color>
                                    <item>
                                        <host>Template SensatronicsEM1</host>
                                        <key>sensor2.temperature[{#SENSORNAME}]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>FILLED_REGION</drawtype>
                                    <color>00FFBF</color>
                                    <item>
                                        <host>Template SensatronicsEM1</host>
                                        <key>sensor2.dewpoint[{#SENSORNAME}]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                    </graph_prototypes>
                </discovery_rule>
                <discovery_rule>
                    <name>Sensor 3 discovery</name>
                    <type>SNMPV1</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>discovery[{#SENSORNAME},.1.3.6.1.4.1.16174.1.1.3.3.3.1]</snmp_oid>
                    <key>Sensor3</key>
                    <delay>10m</delay>
                    <filter>
                        <evaltype>AND</evaltype>
                        <conditions>
                            <condition>
                                <macro>{#SENSORNAME}</macro>
                                <value>{$SENSORNAME.MATCH}</value>
                                <formulaid>A</formulaid>
                            </condition>
                            <condition>
                                <macro>{#SENSORNAME}</macro>
                                <value>{$SENSORNAME.NOT_MATCH}</value>
                                <operator>NOT_MATCHES_REGEX</operator>
                                <formulaid>B</formulaid>
                            </condition>
                        </conditions>
                    </filter>
                    <lifetime>1d</lifetime>
                    <description>Автоматическое обнаружение сенсора №3, при условии настроенного имени, отличного от имени по-умолчанию.</description>
                    <item_prototypes>
                        <item_prototype>
                            <name>{#SENSORNAME} DewPoint</name>
                            <type>CALCULATED</type>
                            <key>sensor3.dewpoint[{#SENSORNAME}]</key>
                            <value_type>FLOAT</value_type>
                            <units>`C</units>
                            <params>last(sensor3.temperature[{#SENSORNAME}])-((100-last(sensor3.humidity[{#SENSORNAME}]))/5)</params>
                            <description>Zabbix version 4 does not support mathematical functions, so a simple formula with a high margin of error is used: T_d = T - ((100 - RH) / 5)</description>
                            <applications>
                                <application>
                                    <name>Sensors</name>
                                </application>
                            </applications>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last()}&gt;{$DEWPOINT.MAX}</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{last()}&lt;{$DEWPOINT.MAX}-1</recovery_expression>
                                    <name>Dew point {#SENSORNAME} is gt {$DEWPOINT.MAX} `C</name>
                                    <priority>WARNING</priority>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{last()}&lt;{$DEWPOINT.MIN}</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{last()}&gt;{$DEWPOINT.MIN}+1</recovery_expression>
                                    <name>Dew point {#SENSORNAME} is lt {$DEWPOINT.MIN} `C</name>
                                    <priority>WARNING</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#SENSORNAME} Humidity</name>
                            <type>SNMPV1</type>
                            <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                            <snmp_oid>.1.3.6.1.4.1.16174.1.1.3.3.3.6.0</snmp_oid>
                            <key>sensor3.humidity[{#SENSORNAME}]</key>
                            <value_type>FLOAT</value_type>
                            <units>%</units>
                            <applications>
                                <application>
                                    <name>Sensors</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>IN_RANGE</type>
                                    <params>0
100</params>
                                </step>
                            </preprocessing>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last()}&gt;{$HUMIDITY.MAX}</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{last()}&lt;{$HUMIDITY.MAX}-5</recovery_expression>
                                    <name>Humidity {#SENSORNAME} is gt {$HUMIDITY.MAX} %</name>
                                    <priority>WARNING</priority>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{last()}&lt;{$HUMIDITY.MIN}</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{last()}&gt;{$HUMIDITY.MIN}+5</recovery_expression>
                                    <name>Humidity {#SENSORNAME} is lt {$HUMIDITY.MAX} %</name>
                                    <priority>WARNING</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#SENSORNAME} Temperature</name>
                            <type>SNMPV1</type>
                            <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                            <snmp_oid>.1.3.6.1.4.1.16174.1.1.3.3.3.3.0</snmp_oid>
                            <key>sensor3.temperature[{#SENSORNAME}]</key>
                            <value_type>FLOAT</value_type>
                            <units>`C</units>
                            <applications>
                                <application>
                                    <name>Sensors</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>IN_RANGE</type>
                                    <params>-20
100</params>
                                </step>
                            </preprocessing>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{nodata(5m)}=1</expression>
                                    <name>No data. Check sensor {#SENSORNAME}</name>
                                    <priority>WARNING</priority>
                                    <dependencies>
                                        <dependency>
                                            <name>No SNMP data collection</name>
                                            <expression>{Template SensatronicsEM1:zabbix[host,snmp,available].max({$SNMP.TIMEOUT})}=0</expression>
                                        </dependency>
                                    </dependencies>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{last()}&gt;{$TEMPERATURE.MAX}</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{last()}&lt;{$TEMPERATURE.MAX}-1</recovery_expression>
                                    <name>Temperature {#SENSORNAME} is gt {$TEMPERATURE.MAX} `C</name>
                                    <priority>DISASTER</priority>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{last()}&lt;{$TEMPERATURE.MIN}</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{last()}&gt;{$TEMPERATURE.MIN}+1</recovery_expression>
                                    <name>Temperature {#SENSORNAME} is lt {$TEMPERATURE.MIN} `C</name>
                                    <priority>DISASTER</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                    </item_prototypes>
                    <graph_prototypes>
                        <graph_prototype>
                            <name>Humidity Sensor3 {#SENSORNAME}</name>
                            <ymin_type_1>FIXED</ymin_type_1>
                            <ymax_type_1>FIXED</ymax_type_1>
                            <graph_items>
                                <graph_item>
                                    <color>00FF00</color>
                                    <item>
                                        <host>Template SensatronicsEM1</host>
                                        <key>sensor3.humidity[{#SENSORNAME}]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <name>Temperature Sensor3 {#SENSORNAME}</name>
                            <yaxismax>30.0000</yaxismax>
                            <ymin_type_1>FIXED</ymin_type_1>
                            <ymax_type_1>FIXED</ymax_type_1>
                            <graph_items>
                                <graph_item>
                                    <color>00FF00</color>
                                    <item>
                                        <host>Template SensatronicsEM1</host>
                                        <key>sensor3.temperature[{#SENSORNAME}]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>FILLED_REGION</drawtype>
                                    <color>00FF00</color>
                                    <item>
                                        <host>Template SensatronicsEM1</host>
                                        <key>sensor3.dewpoint[{#SENSORNAME}]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                    </graph_prototypes>
                </discovery_rule>
                <discovery_rule>
                    <name>Sensor 4 discovery</name>
                    <type>SNMPV1</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>discovery[{#SENSORNAME},.1.3.6.1.4.1.16174.1.1.3.3.4.1]</snmp_oid>
                    <key>Sensor4</key>
                    <delay>10m</delay>
                    <filter>
                        <evaltype>AND</evaltype>
                        <conditions>
                            <condition>
                                <macro>{#SENSORNAME}</macro>
                                <value>{$SENSORNAME.MATCH}</value>
                                <formulaid>A</formulaid>
                            </condition>
                            <condition>
                                <macro>{#SENSORNAME}</macro>
                                <value>{$SENSORNAME.NOT_MATCH}</value>
                                <operator>NOT_MATCHES_REGEX</operator>
                                <formulaid>B</formulaid>
                            </condition>
                        </conditions>
                    </filter>
                    <lifetime>1d</lifetime>
                    <description>Автоматическое обнаружение сенсора №4, при условии настроенного имени, отличного от имени по-умолчанию.</description>
                    <item_prototypes>
                        <item_prototype>
                            <name>{#SENSORNAME} DewPoint</name>
                            <type>CALCULATED</type>
                            <key>sensor4.dewpoint[{#SENSORNAME}]</key>
                            <value_type>FLOAT</value_type>
                            <units>`C</units>
                            <params>last(sensor4.temperature[{#SENSORNAME}])-((100-last(sensor4.humidity[{#SENSORNAME}]))/5)</params>
                            <description>Zabbix version 4 does not support mathematical functions, so a simple formula with a high margin of error is used: T_d = T - ((100 - RH) / 5)</description>
                            <applications>
                                <application>
                                    <name>Sensors</name>
                                </application>
                            </applications>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last()}&gt;{$DEWPOINT.MAX}</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{last()}&lt;{$DEWPOINT.MAX}-1</recovery_expression>
                                    <name>Dew point {#SENSORNAME} is gt {$DEWPOINT.MAX} `C</name>
                                    <priority>WARNING</priority>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{last()}&lt;{$DEWPOINT.MIN}</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{last()}&gt;{$DEWPOINT.MIN}+1</recovery_expression>
                                    <name>Dew point {#SENSORNAME} is lt {$DEWPOINT.MIN} `C</name>
                                    <priority>WARNING</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#SENSORNAME} Humidity</name>
                            <type>SNMPV1</type>
                            <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                            <snmp_oid>.1.3.6.1.4.1.16174.1.1.3.3.4.6.0</snmp_oid>
                            <key>sensor4.humidity[{#SENSORNAME}]</key>
                            <value_type>FLOAT</value_type>
                            <units>%</units>
                            <applications>
                                <application>
                                    <name>Sensors</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>IN_RANGE</type>
                                    <params>0
100</params>
                                </step>
                            </preprocessing>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last()}&gt;{$HUMIDITY.MAX}</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{last()}&lt;{$HUMIDITY.MAX}-5</recovery_expression>
                                    <name>Humidity {#SENSORNAME} is gt {$HUMIDITY.MAX} %</name>
                                    <priority>WARNING</priority>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{last()}&lt;{$HUMIDITY.MIN}</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{last()}&gt;{$HUMIDITY.MIN}+5</recovery_expression>
                                    <name>Humidity {#SENSORNAME} is lt {$HUMIDITY.MAX} %</name>
                                    <priority>WARNING</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>{#SENSORNAME} Temperature</name>
                            <type>SNMPV1</type>
                            <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                            <snmp_oid>.1.3.6.1.4.1.16174.1.1.3.3.4.3.0</snmp_oid>
                            <key>sensor4.temperature[{#SENSORNAME}]</key>
                            <value_type>FLOAT</value_type>
                            <units>`C</units>
                            <applications>
                                <application>
                                    <name>Sensors</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>IN_RANGE</type>
                                    <params>-20
100</params>
                                </step>
                            </preprocessing>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{nodata(5m)}=1</expression>
                                    <name>No data. Check sensor {#SENSORNAME}</name>
                                    <priority>WARNING</priority>
                                    <dependencies>
                                        <dependency>
                                            <name>No SNMP data collection</name>
                                            <expression>{Template SensatronicsEM1:zabbix[host,snmp,available].max({$SNMP.TIMEOUT})}=0</expression>
                                        </dependency>
                                    </dependencies>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{last()}&gt;{$TEMPERATURE.MAX}</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{last()}&lt;{$TEMPERATURE.MAX}-1</recovery_expression>
                                    <name>Temperature {#SENSORNAME} is gt {$TEMPERATURE.MAX} `C</name>
                                    <priority>DISASTER</priority>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{last()}&lt;{$TEMPERATURE.MIN}</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{last()}&gt;{$TEMPERATURE.MIN}+1</recovery_expression>
                                    <name>Temperature {#SENSORNAME} is lt {$TEMPERATURE.MIN} `C</name>
                                    <priority>DISASTER</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                    </item_prototypes>
                    <graph_prototypes>
                        <graph_prototype>
                            <name>Humidity Sensor4 {#SENSORNAME}</name>
                            <ymin_type_1>FIXED</ymin_type_1>
                            <ymax_type_1>FIXED</ymax_type_1>
                            <graph_items>
                                <graph_item>
                                    <color>FFBF00</color>
                                    <item>
                                        <host>Template SensatronicsEM1</host>
                                        <key>sensor4.humidity[{#SENSORNAME}]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <name>Temperature Sensor4 {#SENSORNAME}</name>
                            <yaxismin>10.0000</yaxismin>
                            <yaxismax>30.0000</yaxismax>
                            <ymin_type_1>FIXED</ymin_type_1>
                            <ymax_type_1>FIXED</ymax_type_1>
                            <graph_items>
                                <graph_item>
                                    <color>FFBF00</color>
                                    <item>
                                        <host>Template SensatronicsEM1</host>
                                        <key>sensor4.temperature[{#SENSORNAME}]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>FILLED_REGION</drawtype>
                                    <color>FFBF00</color>
                                    <item>
                                        <host>Template SensatronicsEM1</host>
                                        <key>sensor4.dewpoint[{#SENSORNAME}]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                    </graph_prototypes>
                </discovery_rule>
            </discovery_rules>
            <macros>
                <macro>
                    <macro>{$DEWPOINT.MAX}</macro>
                    <value>20</value>
                    <description>Максимальная температура точки росы.</description>
                </macro>
                <macro>
                    <macro>{$DEWPOINT.MIN}</macro>
                    <value>4</value>
                    <description>Минимальная температура точки росы.</description>
                </macro>
                <macro>
                    <macro>{$HUMIDITY.MAX}</macro>
                    <value>80</value>
                    <description>Максимальная влажность.</description>
                </macro>
                <macro>
                    <macro>{$HUMIDITY.MIN}</macro>
                    <value>30</value>
                    <description>Минимальная влажность.</description>
                </macro>
                <macro>
                    <macro>{$ICMP_LOSS_WARN}</macro>
                    <value>20</value>
                </macro>
                <macro>
                    <macro>{$ICMP_RESPONSE_TIME_WARN}</macro>
                    <value>0.15</value>
                </macro>
                <macro>
                    <macro>{$SENSORNAME.MATCH}</macro>
                    <value>^.+$</value>
                    <description>Обнаруживаем только те сенсоры, для которых задано имя.</description>
                </macro>
                <macro>
                    <macro>{$SENSORNAME.NOT_MATCH}</macro>
                    <value>^Group\s[1-4]$</value>
                    <description>Не обнаруживаем сенсоры с дефолтными именами.</description>
                </macro>
                <macro>
                    <macro>{$SNMP.TIMEOUT}</macro>
                    <value>5m</value>
                </macro>
                <macro>
                    <macro>{$TEMPERATURE.MAX}</macro>
                    <value>25</value>
                    <description>Максимальная температура.</description>
                </macro>
                <macro>
                    <macro>{$TEMPERATURE.MIN}</macro>
                    <value>16</value>
                    <description>Минимальная температура.</description>
                </macro>
            </macros>
        </template>
    </templates>
    <value_maps>
        <value_map>
            <name>Service state</name>
            <mappings>
                <mapping>
                    <value>0</value>
                    <newvalue>Down</newvalue>
                </mapping>
                <mapping>
                    <value>1</value>
                    <newvalue>Up</newvalue>
                </mapping>
            </mappings>
        </value_map>
        <value_map>
            <name>zabbix.host.available</name>
            <mappings>
                <mapping>
                    <value>0</value>
                    <newvalue>not available</newvalue>
                </mapping>
                <mapping>
                    <value>1</value>
                    <newvalue>available</newvalue>
                </mapping>
                <mapping>
                    <value>2</value>
                    <newvalue>unknown</newvalue>
                </mapping>
            </mappings>
        </value_map>
    </value_maps>
</zabbix_export>
